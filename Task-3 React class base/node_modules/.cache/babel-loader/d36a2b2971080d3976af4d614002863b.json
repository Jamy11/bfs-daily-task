{"ast":null,"code":"import _objectSpread from\"/Users/jamyarrahman/Desktop/react-practice-class/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/jamyarrahman/Desktop/react-practice-class/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/jamyarrahman/Desktop/react-practice-class/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/jamyarrahman/Desktop/react-practice-class/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/jamyarrahman/Desktop/react-practice-class/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import Header from\"./Header\";import Order from\"./Order\";import Inventory from\"./Inventory\";import sampleFishes from'../sample-fishes';import Fish from\"./Fish\";import base from'../base';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fishes:{},order:{}};_this.addFish=function(fish){// 1. Take a copy of the existing state\nvar fishes=_objectSpread({},_this.state.fishes);// 2. Add our new fish to that fishes variable\nfishes[\"fish\".concat(Date.now())]=fish;// 3. Set the new fishes object to state\n_this.setState({fishes});};_this.loadSampleFishes=function(){_this.setState({fishes:sampleFishes});};_this.addToOrder=function(key){// 1. copy of state \nvar order=_objectSpread({},_this.state.order);order[key]=order[key]+1||1;_this.setState({order});};_this.updatedFish=function(key,updatedFish){var fishes=_objectSpread({},_this.state.fishes);fishes[key]=updatedFish;_this.setState({fishes});};_this.deleteFish=function(key){var fishes=_objectSpread({},_this.state.fishes);fishes[key]=null;_this.setState({fishes});};_this.removeFromOrder=function(key){var order=_objectSpread({},_this.state.order);delete order[key];_this.setState({order});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){// console.log('Mounted')\nvar localStorageRef=localStorage.getItem(this.props.match.params.storeId);if(localStorageRef){this.setState({order:JSON.parse(localStorageRef)});}this.ref=base.syncState(\"\".concat(this.props.match.params.storeId,\"/fishes\"),{context:this,state:'fishes'});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){// console.log(\"UPDATED\")\nlocalStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){// console.log('unmounting')\nbase.removeBinding(this.ref);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"catch-of-the-day\"},/*#__PURE__*/React.createElement(\"div\",{className:\"menu\"},/*#__PURE__*/React.createElement(Header,{tagline:\"Fresh Seafood Market\",age:100}),/*#__PURE__*/React.createElement(\"ul\",{className:\"fishes\"},Object.keys(this.state.fishes).map(function(key){return/*#__PURE__*/React.createElement(Fish,{key:key,details:_this2.state.fishes[key],order:_this2.addToOrder,index:key});}))),/*#__PURE__*/React.createElement(Order,{fishes:this.state.fishes,order:this.state.order,removeFromOrder:this.removeFromOrder}),/*#__PURE__*/React.createElement(Inventory,{addFish:this.addFish,loadSampleFishes:this.loadSampleFishes,fishes:this.state.fishes,updatedFish:this.updatedFish,deleteFish:this.deleteFish,storeId:this.props.match.params.storeId}));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/jamyarrahman/Desktop/react-practice-class/src/components/App.js"],"names":["React","Header","Order","Inventory","sampleFishes","Fish","base","App","state","fishes","order","addFish","fish","Date","now","setState","loadSampleFishes","addToOrder","key","updatedFish","deleteFish","removeFromOrder","localStorageRef","localStorage","getItem","props","match","params","storeId","JSON","parse","ref","syncState","context","setItem","stringify","removeBinding","Object","keys","map","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Header from \"./Header\";\nimport Order from \"./Order\";\nimport Inventory from \"./Inventory\";\nimport sampleFishes from '../sample-fishes';\nimport Fish from \"./Fish\";\nimport base from '../base'\n\nclass App extends React.Component {\n  state ={\n    fishes:{},\n    order:{}\n  }\n\n  componentDidMount(){\n    // console.log('Mounted')\n    const localStorageRef = localStorage.getItem(this.props.match.params.storeId)\n    if(localStorageRef){\n      this.setState({order: JSON.parse(localStorageRef)})\n    }\n    this.ref = base.syncState(`${this.props.match.params.storeId}/fishes`,{\n      context:this,\n      state:'fishes',\n    })\n  }\n\n  componentDidUpdate(){\n    // console.log(\"UPDATED\")\n    localStorage.setItem(this.props.match.params.storeId,JSON.stringify(this.state.order))\n  }\n\n  componentWillUnmount(){\n    // console.log('unmounting')\n    base.removeBinding(this.ref)\n  }\n\n\n\n  addFish = fish =>{\n    // 1. Take a copy of the existing state\n    const fishes = {...this.state.fishes}\n    // 2. Add our new fish to that fishes variable\n    fishes[`fish${Date.now()}`] = fish\n    // 3. Set the new fishes object to state\n    this.setState({\n      fishes\n    })\n  }\n\n  loadSampleFishes = () =>{\n    this.setState({\n      fishes:sampleFishes\n    })\n  }\n\n  addToOrder =(key) =>{\n    // 1. copy of state \n    const order = {...this.state.order}\n\n    order[key] = order[key]+1 || 1\n\n    this.setState({order})\n  }\n\n  updatedFish =(key,updatedFish) =>{\n    const fishes = {...this.state.fishes}\n    fishes[key] = updatedFish\n    this.setState({fishes})\n  }\n\n  deleteFish = (key)=>{\n    const fishes = {...this.state.fishes}\n\n\n    fishes[key] = null\n\n\n    this.setState({fishes})\n  }\n\n  removeFromOrder = key =>{\n    const order = {...this.state.order}\n\n    delete order[key] \n\n    this.setState({order})\n  }\n  render() {\n    return (\n      <div className=\"catch-of-the-day\">\n        <div className=\"menu\">\n          <Header tagline=\"Fresh Seafood Market\" age={100} />\n          <ul className='fishes'>\n            {/* <Fish /> */}\n            { Object.keys(this.state.fishes).map(key=> <Fish key={key} details={this.state.fishes[key]} order={this.addToOrder} \n            index={key}/> ) }\n          </ul>\n        </div>\n        <Order fishes={this.state.fishes} order={this.state.order} removeFromOrder={this.removeFromOrder}/>\n        <Inventory addFish={this.addFish} loadSampleFishes={this.loadSampleFishes} \n        fishes={this.state.fishes} updatedFish={this.updatedFish} deleteFish={this.deleteFish}\n        storeId={this.props.match.params.storeId}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}